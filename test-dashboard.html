<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Test Dashboard | TodoTask Pro</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --bg-light: #f7f7f8;
      --bg-dark: #0c0f1c;
      --card-light: #fff;
      --card-dark: #1c2030;
      --accent: #4A90E2;
      --accent-alt: #e0c097;
      --text-light: #eee;
      --text-dark: #222;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-light);
      color: var(--text-dark);
      margin: 0;
      transition: background 0.4s, color 0.4s;
    }

    body.dark {
      background: radial-gradient(circle at center, #0c1023, #000);
      color: var(--text-light);
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--card-light);
      padding: 15px 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    body.dark .navbar { background: var(--card-dark); }

    .container {
      max-width: 900px;
      margin: 30px auto;
      padding: 20px;
    }

    .task-board {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
    }

    .task {
      flex: 1 1 260px;
      background: var(--card-light);
      border-left: 5px solid var(--accent);
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      transition: transform 0.2s;
    }

    .task:hover { transform: scale(1.02); }
    body.dark .task { background: var(--card-dark); border-color: var(--accent-alt); }

    .task.completed { opacity: 0.6; text-decoration: line-through; }

    .toolbar {
      text-align: center;
      margin-bottom: 20px;
    }

    .toolbar button {
      margin: 5px;
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: var(--accent);
      color: white;
      font-weight: 500;
      transition: 0.3s;
    }
    .toolbar button:hover { transform: translateY(-2px); }

    .chart-box {
      margin-top: 30px;
      background: var(--card-light);
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    body.dark .chart-box { background: var(--card-dark); }

    canvas { width: 100%; max-height: 300px; }

    @media (max-width: 600px) {
      .task-board { flex-direction: column; }
    }
  </style>
</head>

<body>
  <div class="navbar">
    <h2>üß™ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö TodoTask Pro</h2>
    <div>
      <button onclick="toggleTheme()">üåó</button>
      <button onclick="resetDemo()">‚ôªÔ∏è ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    </div>
  </div>

  <div class="container">
    <div class="toolbar">
      <button onclick="addTask()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡∏à‡∏≥‡∏•‡∏≠‡∏á</button>
      <button onclick="toggleRandomTask()">‚úÖ ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏¥‡πä‡∏Å‡∏á‡∏≤‡∏ô</button>
    </div>

    <div class="task-board" id="taskBoard"></div>

    <div class="chart-box">
      <h3>üìä ‡∏Å‡∏£‡∏≤‡∏ü‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h3>
      <canvas id="progressChart"></canvas>
    </div>

    <div class="chart-box">
      <h3>üìà ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</h3>
      <canvas id="trendChart"></canvas>
    </div>
  </div>

  <script>
    let demoTasks = [
      { id: 1, text: "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö API", completed: false },
      { id: 2, text: "‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î", completed: true },
      { id: 3, text: "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô", completed: false },
    ];

    let progressChart, trendChart;

    function renderTasks() {
      const board = document.getElementById("taskBoard");
      board.innerHTML = "";
      demoTasks.forEach(task => {
        const div = document.createElement("div");
        div.className = "task" + (task.completed ? " completed" : "");
        div.innerHTML = `
          <p>${task.text}</p>
          <button onclick="toggleTask(${task.id})">${task.completed ? "‚Ü©Ô∏è ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö" : "‚úîÔ∏è ‡πÄ‡∏™‡∏£‡πá‡∏à"}</button>
        `;
        board.appendChild(div);
      });
      updateCharts();
    }

    function addTask() {
      const id = Date.now();
      demoTasks.push({ id, text: "‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà #" + id, completed: false });
      renderTasks();
    }

    function toggleTask(id) {
      const task = demoTasks.find(t => t.id === id);
      if (task) task.completed = !task.completed;
      renderTasks();
    }

    function toggleRandomTask() {
      if (demoTasks.length === 0) return;
      const randomIndex = Math.floor(Math.random() * demoTasks.length);
      demoTasks[randomIndex].completed = !demoTasks[randomIndex].completed;
      renderTasks();
    }

    function resetDemo() {
      demoTasks = [
        { id: 1, text: "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö API", completed: false },
        { id: 2, text: "‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î", completed: true },
        { id: 3, text: "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô", completed: false },
      ];
      renderTasks();
    }

    function updateCharts() {
      const done = demoTasks.filter(t => t.completed).length;
      const total = demoTasks.length;
      const percent = total ? Math.round((done / total) * 100) : 0;

      if (progressChart) progressChart.destroy();
      progressChart = new Chart(document.getElementById("progressChart"), {
        type: "doughnut",
        data: {
          labels: ["‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß", "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à"],
          datasets: [{
            data: [done, total - done],
            backgroundColor: ["#4A90E2", "#E0E0E0"]
          }]
        },
        options: { cutout: "70%" }
      });

      if (trendChart) trendChart.destroy();
      trendChart = new Chart(document.getElementById("trendChart"), {
        type: "bar",
        data: {
          labels: ["‡∏à.", "‡∏≠.", "‡∏û.", "‡∏û‡∏§.", "‡∏®.", "‡∏™.", "‡∏≠‡∏≤."],
          datasets: [{
            label: "‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à",
            data: [2, 1, 3, 2, 4, 3, 5].map(v => Math.floor(v * Math.random() * 2)),
            backgroundColor: "#4A90E2"
          }]
        },
        options: { scales: { y: { beginAtZero: true } } }
      });
    }

    function toggleTheme() {
      document.body.classList.toggle("dark");
      localStorage.setItem("theme", document.body.classList.contains("dark") ? "dark" : "light");
    }

    if (localStorage.getItem("theme") === "dark") document.body.classList.add("dark");

    renderTasks();
  </script>
</body>
</html>
