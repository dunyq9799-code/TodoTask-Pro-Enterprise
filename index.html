<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üìã ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô</title>

  <!-- ‚úÖ ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏à‡∏≤‡∏Å Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    /* ============================
       üé® CSS STYLE ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
       ============================ */
    body {
      font-family: 'Kanit', sans-serif;
      background: linear-gradient(135deg, #e3f2fd, #90caf9);
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    header {
      width: 100%;
      background: #1976d2;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 25px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    header h1 {
      margin: 0;
      font-weight: 600;
    }

    .logout-btn {
      background: #ef5350;
      border: none;
      color: white;
      padding: 8px 14px;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.3s;
    }

    .logout-btn:hover {
      background: #d32f2f;
    }

    main {
      flex: 1;
      width: 90%;
      max-width: 600px;
      margin-top: 40px;
    }

    .task-input {
      display: flex;
      justify-content: center;
      gap: 10px;
    }

    .task-input input {
      flex: 1;
      padding: 10px;
      border: 1px solid #bbb;
      border-radius: 6px;
      font-size: 16px;
    }

    .task-input button {
      background: #2196f3;
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.3s;
    }

    .task-input button:hover {
      background: #1976d2;
    }

    ul#taskList {
      list-style: none;
      padding: 0;
      margin-top: 25px;
    }

    li.task-item {
      background: white;
      margin-bottom: 12px;
      padding: 12px 15px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .task-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .task-left span {
      font-size: 16px;
    }

    .task-left span.done {
      text-decoration: line-through;
      color: #888;
    }

    .delete-btn {
      background: #ef5350;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 6px 10px;
      cursor: pointer;
      transition: 0.3s;
    }

    .delete-btn:hover {
      background: #d32f2f;
    }

    footer {
      text-align: center;
      color: #555;
      padding: 20px 0;
      font-size: 14px;
    }

    @media (max-width: 480px) {
      header h1 {
        font-size: 20px;
      }
      .task-input button {
        padding: 10px;
      }
    }
  </style>
</head>
<body>

  <!-- ============================
       üß≠ ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö
       ============================ -->
  <header>
    <h1>üìã ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô</h1>
    <button class="logout-btn">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
  </header>

  <!-- ============================
       üß© ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å
       ============================ -->
  <main>
    <div class="task-input">
      <input type="text" id="taskInput" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà...">
      <button id="addTaskBtn">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô</button>
    </div>
    <ul id="taskList"></ul>
  </main>

  <footer>
    <p>¬© 2025 ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô | ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏î‡∏¢ HTML + CSS + JS + Firebase</p>
  </footer>

  <!-- ============================
       ‚öôÔ∏è Firebase + JavaScript Logic
       ============================ -->
  <script type="module">
    /* -----------------------------------------------------
       ‚úÖ 1. ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ Firebase SDK ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Config
    ----------------------------------------------------- */
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
    import { getFirestore, collection, addDoc, onSnapshot, deleteDoc, doc, updateDoc } 
    from "https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyB_7tyj_BAyFzKEYVrZXfQjWCUXGS7VqKY",
      authDomain: "my-todo-list-9d2fa.firebaseapp.com",
      projectId: "my-todo-list-9d2fa",
      storageBucket: "my-todo-list-9d2fa.appspot.com",
      messagingSenderId: "631403892452",
      appId: "1:631403892452:web:66d382bf5f143fc05de6f1"
    };

    // ‚úÖ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    /* -----------------------------------------------------
       ‚úÖ 2. ‡∏Å‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ HTML
    ----------------------------------------------------- */
    const taskInput = document.getElementById("taskInput");
    const addTaskBtn = document.getElementById("addTaskBtn");
    const taskList = document.getElementById("taskList");

    /* -----------------------------------------------------
       ‚úÖ 3. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏•‡∏á Firestore
    ----------------------------------------------------- */
    addTaskBtn.addEventListener("click", async () => {
      const taskName = taskInput.value.trim();
      if (taskName === "") return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°!");

      try {
        await addDoc(collection(db, "tasks"), {
          name: taskName,
          done: false,
          createdAt: new Date()
        });
        taskInput.value = ""; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å
      } catch (error) {
        console.error("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô:", error);
      }
    });

    /* -----------------------------------------------------
       ‚úÖ 4. ‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå
    ----------------------------------------------------- */
    onSnapshot(collection(db, "tasks"), (snapshot) => {
      taskList.innerHTML = "";
      snapshot.forEach((docSnap) => {
        const task = docSnap.data();

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á <li> ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏á‡∏≤‡∏ô
        const li = document.createElement("li");
        li.className = "task-item";

        // ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡πÅ‡∏•‡∏∞‡∏ä‡∏∑‡πà‡∏≠
        const leftDiv = document.createElement("div");
        leftDiv.className = "task-left";

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.checked = task.done;

        const span = document.createElement("span");
        span.textContent = task.name;
        if (task.done) span.classList.add("done");

        // ‚úÖ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡∏¥‡πä‡∏Å‡∏ñ‡∏π‡∏Å/‡πÄ‡∏≠‡∏≤‡∏≠‡∏≠‡∏Å
        checkbox.addEventListener("change", async () => {
          await updateDoc(doc(db, "tasks", docSnap.id), {
            done: checkbox.checked
          });
        });

        leftDiv.appendChild(checkbox);
        leftDiv.appendChild(span);

        // ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö
        const delBtn = document.createElement("button");
        delBtn.textContent = "üóë";
        delBtn.className = "delete-btn";
        delBtn.addEventListener("click", async () => {
          await deleteDoc(doc(db, "tasks", docSnap.id));
        });

        li.appendChild(leftDiv);
        li.appendChild(delBtn);
        taskList.appendChild(li);
      });
    });
  </script>
</body>
</html>
