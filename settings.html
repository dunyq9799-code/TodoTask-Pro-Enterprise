<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Organization Settings | TodoTask Pro Enterprise</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #4A90E2;
      --primary-dark: #2F6BB1;
      --bg-light: #F7F7F8;
      --bg-dark: #1B1D23;
      --card-light: #FFFFFF;
      --card-dark: #242731;
      --text-dark: #2B2B2B;
      --text-light: #EAEAEA;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-light);
      color: var(--text-dark);
      margin: 0;
      transition: background 0.5s, color 0.5s;
    }
    body.dark { background: var(--bg-dark); color: var(--text-light); }

    .navbar {
      display: flex; justify-content: space-between; align-items: center;
      padding: 15px 30px; background: var(--card-light);
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    body.dark .navbar { background: var(--card-dark); }

    .container {
      max-width: 900px;
      margin: 30px auto;
      padding: 20px;
      background: var(--card-light);
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    body.dark .container { background: var(--card-dark); }

    h2, h3 { color: var(--primary); }

    .setting-group {
      margin-bottom: 30px;
      border-bottom: 1px solid rgba(0,0,0,0.1);
      padding-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
    }

    input, select {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 15px;
      margin-bottom: 12px;
    }

    .save-btn {
      background: var(--primary);
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 15px;
      transition: 0.3s;
    }
    .save-btn:hover { background: var(--primary-dark); }

    .logout {
      background: #888;
      color: white;
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .container { padding: 15px; }
    }
  </style>
</head>

<body>
  <div class="navbar">
    <h2>‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£</h2>
    <div>
      <button class="logout" onclick="logout()">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
      <button onclick="toggleTheme()">üåó</button>
    </div>
  </div>

  <div class="container">
    <div class="setting-group">
      <h3>üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£</h3>
      <label>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏á‡∏≤‡∏ô)</label>
      <input type="number" id="goal" placeholder="‡πÄ‡∏ä‡πà‡∏ô 100">
    </div>

    <div class="setting-group">
      <h3>üë• ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏°</h3>
      <label>‡∏ó‡∏µ‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</label>
      <select id="teamSelect">
        <option value="teamA">‡∏ó‡∏µ‡∏° A</option>
        <option value="teamB">‡∏ó‡∏µ‡∏° B</option>
        <option value="teamC">‡∏ó‡∏µ‡∏° C</option>
      </select>

      <label>‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏ó‡∏µ‡∏°</label>
      <input type="number" id="teamGoal" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡∏°">
    </div>

    <div class="setting-group">
      <h3>üßë‚Äçüíº ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h3>
      <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
      <input type="email" id="userEmail" placeholder="‡πÄ‡∏ä‡πà‡∏ô user@example.com">

      <label>‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</label>
      <select id="userRole">
        <option value="staff">Staff</option>
        <option value="admin">Admin</option>
        <option value="viewer">Viewer</option>
      </select>
    </div>

    <div class="setting-group">
      <h3>üé® ‡∏ò‡∏µ‡∏°‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£</h3>
      <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ó‡∏ô‡∏™‡∏µ</label>
      <select id="themeSelect">
        <option value="corporate">Corporate (‡∏ü‡πâ‡∏≤‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô)</option>
        <option value="space">Space (‡∏°‡πà‡∏ß‡∏á‡πÄ‡∏Ç‡πâ‡∏°)</option>
        <option value="light">Light (‡∏Ç‡∏≤‡∏ß-‡πÄ‡∏ó‡∏≤)</option>
      </select>
    </div>

    <div class="setting-group">
      <h3>üîî ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h3>
      <label>‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</label>
      <select id="notify">
        <option value="on">‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</option>
        <option value="off">‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</option>
      </select>
    </div>

    <button class="save-btn" onclick="saveSettings()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js";
    import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyB_7tyj_BAyFzKEYVrZXfQjWCUXGS7VqKY",
      authDomain: "my-todo-list-9d2fa.firebaseapp.com",
      projectId: "my-todo-list-9d2fa",
      storageBucket: "my-todo-list-9d2fa.appspot.com",
      messagingSenderId: "631403892452",
      appId: "1:631403892452:web:66d382bf5f143fc05de6f1"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    window.toggleTheme = () => document.body.classList.toggle("dark");
    window.logout = async () => { await signOut(auth); location.href = "index.html"; };

    onAuthStateChanged(auth, async (user) => {
      if (!user) location.href = "index.html";
      else loadSettings();
    });

    async function loadSettings() {
      const ref = doc(db, "settings", "organization");
      const snap = await getDoc(ref);
      if (snap.exists()) {
        const data = snap.data();
        document.getElementById("goal").value = data.goal || "";
        document.getElementById("themeSelect").value = data.theme || "corporate";
        document.getElementById("notify").value = data.notify || "on";
      }
    }

    async function saveSettings() {
      const ref = doc(db, "settings", "organization");
      const data = {
        goal: parseInt(document.getElementById("goal").value) || 0,
        teamGoal: parseInt(document.getElementById("teamGoal").value) || 0,
        selectedTeam: document.getElementById("teamSelect").value,
        theme: document.getElementById("themeSelect").value,
        notify: document.getElementById("notify").value,
        lastUpdated: new Date().toISOString()
      };
      await setDoc(ref, data);
      alert("‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
    }
  </script>
</body>
</html>
