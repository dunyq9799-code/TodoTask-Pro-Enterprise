<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô | TodoTask Pro Enterprise</title>
<link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root {
  --primary:#6a4cff;
  --secondary:#8e7dff;
  --bg-dark:#0a0717;
  --bg-light:#f9f8ff;
  --card-dark:#1a1630;
  --card-light:#ffffff;
  --text-dark:#222;
  --text-light:#f2f2f2;
}

/* üåå Base */
body {
  font-family:'Sarabun',sans-serif;
  margin:0;
  background:linear-gradient(135deg,#1a1133,#0a0717);
  color:var(--text-light);
  transition:.4s;
  min-height:100vh;
}
body.light {
  background:linear-gradient(135deg,#f3f1ff,#fff);
  color:var(--text-dark);
}

/* Header */
.header {
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  padding:20px 0;
  background:rgba(255,255,255,0.05);
  backdrop-filter:blur(10px);
  box-shadow:0 2px 10px rgba(0,0,0,.3);
}
body.light .header {
  background:rgba(255,255,255,0.7);
  box-shadow:0 2px 10px rgba(0,0,0,.1);
}
.header h2 {margin:0;font-weight:600;}
.back-btn {
  position:absolute;
  left:20px;
  top:50%;
  transform:translateY(-50%);
  background:rgba(255,255,255,0.15);
  border:none;
  border-radius:50%;
  color:white;
  font-size:20px;
  width:45px;
  height:45px;
  cursor:pointer;
  backdrop-filter:blur(10px);
  transition:all .3s;
}
.back-btn:hover {transform:translateY(-50%) scale(1.1);}
body.light .back-btn {color:#2b1f5f;background:rgba(255,255,255,0.6);}

/* Container */
.container {
  max-width:900px;
  margin:40px auto;
  background:rgba(255,255,255,0.08);
  border-radius:15px;
  padding:30px;
  backdrop-filter:blur(12px);
  box-shadow:0 0 20px rgba(120,80,255,0.3);
}
body.light .container {
  background:rgba(255,255,255,0.8);
  box-shadow:0 0 15px rgba(0,0,0,0.1);
}

/* Tasks */
.task-list {
  list-style:none;
  padding:0;
  margin:0;
}
.task-item {
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:rgba(255,255,255,0.08);
  border-radius:8px;
  padding:12px 15px;
  margin-bottom:10px;
  transition:.3s;
}
.task-item:hover {transform:scale(1.02);}
.task-item.completed span {text-decoration:line-through;opacity:0.6;}
body.light .task-item {background:rgba(255,255,255,0.8);}

/* Add Task */
.add-task {
  display:flex;
  gap:10px;
  margin-top:15px;
}
.add-task input {
  flex:1;
  padding:10px;
  border-radius:8px;
  border:none;
  background:rgba(255,255,255,0.15);
  color:white;
}
.add-task button {
  background:linear-gradient(135deg,#6a4cff,#9b7fff);
  border:none;
  color:white;
  padding:10px 16px;
  border-radius:8px;
  cursor:pointer;
  font-weight:600;
  transition:.3s;
}
.add-task button:hover {transform:scale(1.05);}
body.light .add-task input {
  background:rgba(255,255,255,0.9);
  color:#222;
}

/* Charts */
.charts {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
  gap:20px;
  margin-top:30px;
}
.chart-box {
  background:rgba(255,255,255,0.08);
  border-radius:10px;
  padding:20px;
  backdrop-filter:blur(10px);
  text-align:center;
}
body.light .chart-box {background:rgba(255,255,255,0.8);}
canvas{width:100%;max-height:280px;}

/* Footer */
footer {
  text-align:center;
  margin-top:40px;
  color:#888;
  font-size:14px;
}
</style>
</head>

<body>
  <div class="header">
    <button class="back-btn" onclick="goBack()">‚¨Ö</button>
    <h2>üßæ ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</h2>
  </div>

  <div class="container">
    <h3>‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h3>
    <ul class="task-list" id="taskList"></ul>

    <div class="add-task">
      <input id="taskInput" placeholder="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà...">
      <button onclick="addTask()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
    </div>

    <div class="charts">
      <div class="chart-box">
        <h3>‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h3>
        <canvas id="pieChart"></canvas>
      </div>
      <div class="chart-box">
        <h3>‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</h3>
        <canvas id="barChart"></canvas>
      </div>
    </div>
  </div>

  <footer>¬© 2025 TodoTask Pro Enterprise ‚Äî ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js";
import { getFirestore, collection, addDoc, getDocs, query, where, updateDoc, doc } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey:"AIzaSyB_7tyj_BAyFzKEYVrZXfQjWCUXGS7VqKY",
  authDomain:"my-todo-list-9d2fa.firebaseapp.com",
  projectId:"my-todo-list-9d2fa",
  storageBucket:"my-todo-list-9d2fa.appspot.com",
  messagingSenderId:"631403892452",
  appId:"1:631403892452:web:66d382bf5f143fc05de6f1"
};
const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);

// üåó Theme
if(localStorage.getItem("theme")==="light")document.body.classList.add("light");

// ‚¨ÖÔ∏è Back
window.goBack=()=>window.history.back();

// Load mock data (‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÅ‡∏ó‡∏ô Firestore ‡∏à‡∏£‡∏¥‡∏á)
const taskList=document.getElementById("taskList");
let tasks=[
  {id:1,text:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö",completed:true},
  {id:2,text:"‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏ó‡∏µ‡∏°",completed:false},
  {id:3,text:"‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô",completed:false}
];

function renderTasks(){
  taskList.innerHTML="";
  tasks.forEach(t=>{
    const li=document.createElement("li");
    li.className="task-item"+(t.completed?" completed":"");
    li.innerHTML=`<span>${t.text}</span>
                  <button onclick="toggleTask(${t.id})">${t.completed?"‚Ü©Ô∏è":"‚úîÔ∏è"}</button>`;
    taskList.appendChild(li);
  });
  updateCharts();
}

window.addTask=()=>{
  const val=document.getElementById("taskInput").value.trim();
  if(!val)return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏á‡∏≤‡∏ô!");
  tasks.push({id:Date.now(),text:val,completed:false});
  document.getElementById("taskInput").value="";
  renderTasks();
};

window.toggleTask=id=>{
  const t=tasks.find(x=>x.id===id);
  if(t)t.completed=!t.completed;
  renderTasks();
};

// Charts
let pie,bar;
function updateCharts(){
  const done=tasks.filter(t=>t.completed).length;
  const undone=tasks.length-done;

  if(pie)pie.destroy();
  if(bar)bar.destroy();

  pie=new Chart(document.getElementById("pieChart"),{
    type:"doughnut",
    data:{labels:["‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß","‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à"],datasets:[{data:[done,undone],backgroundColor:["#6a4cff","#ccc"]}]},
    options:{cutout:"70%"}
  });

  bar=new Chart(document.getElementById("barChart"),{
    type:"bar",
    data:{labels:["‡∏à","‡∏≠","‡∏û","‡∏û‡∏§","‡∏®","‡∏™","‡∏≠‡∏≤"],datasets:[{data:[2,3,5,4,1,0,2],backgroundColor:"#8e7dff"}]},
    options:{scales:{y:{beginAtZero:true}}}
  });
}

renderTasks();
</script>
</body>
</html>
